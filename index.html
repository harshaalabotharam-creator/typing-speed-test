<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Typing Speed Test Pro</title>

<style>
:root {
  --bg: #0f172a;
  --card: #020617;
  --text: #ffffff;
  --primary: #2563eb;
}

.light {
  --bg: #f1f5f9;
  --card: #ffffff;
  --text: #020617;
}

* {
  box-sizing: border-box;
  font-family: Arial, Helvetica, sans-serif;
}

body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.container {
  background: var(--card);
  width: 450px;
  padding: 25px;
  border-radius: 12px;
  text-align: center;
  box-shadow: 0 10px 25px rgba(0,0,0,0.3);
}

.top-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

button, select {
  background: var(--primary);
  border: none;
  color: #fff;
  padding: 8px 12px;
  border-radius: 5px;
  cursor: pointer;
}

select {
  background: #334155;
}

.stats {
  display: flex;
  justify-content: space-between;
  margin: 15px 0;
}

#text-display {
  border: 1px solid #334155;
  padding: 15px;
  min-height: 110px;
  border-radius: 5px;
  text-align: left;
  line-height: 1.6;
}

.correct { color: #22c55e; }
.incorrect { color: #ef4444; text-decoration: underline; }
.active { border-bottom: 2px solid var(--primary); }

textarea {
  width: 100%;
  height: 90px;
  margin-top: 10px;
  padding: 10px;
  font-size: 16px;
  border-radius: 5px;
  border: none;
  resize: none;
  outline: none;
}

.footer {
  margin-top: 10px;
  font-size: 14px;
  opacity: 0.9;
}
</style>
</head>

<body>

<div class="container">
  <div class="top-bar">
    <h2>‚å®Ô∏è Typing Test</h2>
    <button id="themeToggle">üåô</button>
  </div>

  <div class="stats">
    <div>
      Time:
      <select id="timeSelect">
        <option value="30">30s</option>
        <option value="60" selected>60s</option>
        <option value="120">120s</option>
      </select>
    </div>
    <div>WPM: <span id="wpm">0</span></div>
    <div>Accuracy: <span id="accuracy">100</span>%</div>
  </div>

  <div class="stats">
    <div>Timer: <span id="time">60</span>s</div>
    <div>Best: <span id="best">0</span> WPM</div>
  </div>

  <div id="text-display"></div>

  <textarea id="text-input" placeholder="Start typing..." disabled></textarea>

  <button id="restart" style="margin-top:12px;">Restart</button>

  <div class="footer">Built with HTML, CSS & JS</div>
</div>

<script>
const body = document.body;
const textDisplay = document.getElementById("text-display");
const textInput = document.getElementById("text-input");
const timeEl = document.getElementById("time");
const wpmEl = document.getElementById("wpm");
const accuracyEl = document.getElementById("accuracy");
const restartBtn = document.getElementById("restart");
const themeToggle = document.getElementById("themeToggle");
const timeSelect = document.getElementById("timeSelect");
const bestEl = document.getElementById("best");

const paragraphs = [
  "Consistency is the key to improving your typing speed.",
  "Frontend developers transform ideas into interactive experiences.",
  "Clean code and good design go hand in hand.",
  "Practice typing daily to build muscle memory."
];

let timer;
let maxTime = 60;
let timeLeft = maxTime;
let charIndex = 0;
let mistakes = 0;
let isTyping = false;

bestEl.innerText = localStorage.getItem("bestWPM") || 0;

function loadText() {
  const text = paragraphs[Math.floor(Math.random() * paragraphs.length)];
  textDisplay.innerHTML = "";
  text.split("").forEach((char, index) => {
    const span = document.createElement("span");
    span.innerText = char;
    if (index === 0) span.classList.add("active");
    textDisplay.appendChild(span);
  });
  textInput.value = "";
  textInput.disabled = false;
  textInput.focus();
}

function startTimer() {
  timer = setInterval(() => {
    if (timeLeft > 0) {
      timeLeft--;
      timeEl.innerText = timeLeft;
    } else {
      clearInterval(timer);
      textInput.disabled = true;
      const best = Math.max(wpmEl.innerText, bestEl.innerText);
      localStorage.setItem("bestWPM", best);
      bestEl.innerText = best;
    }
  }, 1000);
}

textInput.addEventListener("keydown", (e) => {
  const chars = textDisplay.querySelectorAll("span");
  if (e.key === "Backspace") {
    if (charIndex > 0) {
      charIndex--;
      chars[charIndex].classList.remove("correct", "incorrect");
      chars[charIndex].classList.add("active");
    }
    return;
  }
});

textInput.addEventListener("input", () => {
  const chars = textDisplay.querySelectorAll("span");
  const typedChar = textInput.value[charIndex];

  if (!isTyping) {
    startTimer();
    isTyping = true;
  }

  if (timeLeft === 0) return;

  chars.forEach(span => span.classList.remove("active"));

  if (typedChar === chars[charIndex].innerText) {
    chars[charIndex].classList.add("correct");
  } else {
    chars[charIndex].classList.add("incorrect");
    mistakes++;
  }

  charIndex++;
  if (chars[charIndex]) chars[charIndex].classList.add("active");

  const correct = charIndex - mistakes;
  const wpm = Math.round((correct / 5) / ((maxTime - timeLeft) / 60));
  const accuracy = Math.round((correct / charIndex) * 100);

  wpmEl.innerText = wpm > 0 ? wpm : 0;
  accuracyEl.innerText = accuracy > 0 ? accuracy : 100;
});

restartBtn.addEventListener("click", () => {
  clearInterval(timer);
  maxTime = parseInt(timeSelect.value);
  timeLeft = maxTime;
  charIndex = 0;
  mistakes = 0;
  isTyping = false;

  timeEl.innerText = maxTime;
  wpmEl.innerText = 0;
  accuracyEl.innerText = 100;

  loadText();
});

themeToggle.addEventListener("click", () => {
  body.classList.toggle("light");
  themeToggle.innerText = body.classList.contains("light") ? "‚òÄÔ∏è" : "üåô";
});

loadText();
</script>

</body>
</html>
